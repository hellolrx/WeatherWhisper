# WeatherWhisper (å¤©è¯­)

ä¸€ä¸ªåŸºäºŽ Vue3 + FastAPI çš„æœ¬åœ°å¤©æ°”åº”ç”¨ï¼Œå¯¹æŽ¥å’Œé£Žå¤©æ°” APIï¼Œæ”¯æŒåŸŽå¸‚æœç´¢ã€å¤šå¤©æ°”ç±»åž‹å±•ç¤ºä¸Žæœ¬åœ°æ”¶è—ã€‚

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æž¶**: Vue 3 + TypeScript
- **æž„å»ºå·¥å…·**: Vite 5
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router
- **HTTP**: Axios
- **æ ·å¼**: åŽŸç”Ÿ CSSï¼ˆæ¨¡å—åŒ–ï¼‰
- **å­˜å‚¨**: localStorageï¼ˆåŸŽå¸‚æ”¶è—ï¼‰

### åŽç«¯
- **æ¡†æž¶**: FastAPI
- **ASGI**: Uvicorn
- **HTTP Client**: HTTPXï¼ˆå¼‚æ­¥ï¼‰
- **ç¼“å­˜**: cachetoolsï¼ˆTTLCacheï¼‰
- **çŽ¯å¢ƒå˜é‡**: python-dotenv
- **æ•°æ®æ ¡éªŒ**: Pydantic

### å¼€å‘å·¥å…·
- **åŒ…ç®¡ç†**: npm (å‰ç«¯) + pip (åŽç«¯)
- **ç‰ˆæœ¬æŽ§åˆ¶**: Git
- **å†…ç½‘ç©¿é€**: ngrok
- **IDE**: cursor

## é¡¹ç›®ç»“æž„

### ðŸ—ï¸ æ¨¡å—åŒ–æž¶æž„è®¾è®¡

é¡¹ç›®é‡‡ç”¨ç»„ä»¶åŒ–ã€æ¨¡å—åŒ–çš„æž¶æž„è®¾è®¡ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§ï¼š

```
WeatherWhisper/
â”œâ”€â”€ backend/                 # FastAPI åŽç«¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ routers/        # API è·¯ç”±å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ geo.py     # åŸŽå¸‚æŸ¥è¯¢æŽ¥å£
â”‚   â”‚   â”‚   â””â”€â”€ weather.py # å¤©æ°”æ•°æ®æŽ¥å£
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ qweather.py # ç¬¬ä¸‰æ–¹APIæœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ main.py        # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ .env               # çŽ¯å¢ƒå˜é‡é…ç½®
â”‚   â””â”€â”€ requirements.txt   # Python ä¾èµ–
â””â”€â”€ frontend/              # Vue3 å‰ç«¯ï¼ˆæ¨¡å—åŒ–é‡æž„ï¼‰
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ components/     # ðŸ§© ç»„ä»¶åº“
    â”‚   â”‚   â”œâ”€â”€ search/     # æœç´¢ç›¸å…³ç»„ä»¶
    â”‚   â”‚   â”‚   â””â”€â”€ SearchBox.vue
    â”‚   â”‚   â”œâ”€â”€ favorites/  # æ”¶è—åŠŸèƒ½ç»„ä»¶
    â”‚   â”‚   â”‚   â””â”€â”€ FavoriteCities.vue
    â”‚   â”‚   â””â”€â”€ weather/    # å¤©æ°”æ˜¾ç¤ºç»„ä»¶
    â”‚   â”‚       â”œâ”€â”€ CurrentWeather.vue
    â”‚   â”‚       â”œâ”€â”€ HourlyForecast.vue
    â”‚   â”‚       â””â”€â”€ DailyForecast.vue
    â”‚   â”œâ”€â”€ composables/    # ðŸŽ£ ç»„åˆå¼API
    â”‚   â”‚   â”œâ”€â”€ useWeatherApi.ts    # å¤©æ°”APIæœåŠ¡
    â”‚   â”‚   â””â”€â”€ useGeolocation.ts   # åœ°ç†ä½ç½®æœåŠ¡
    â”‚   â”œâ”€â”€ stores/         # ðŸ“¦ çŠ¶æ€ç®¡ç†
    â”‚   â”‚   â””â”€â”€ favorites.ts # æ”¶è—åŸŽå¸‚Store
    â”‚   â”œâ”€â”€ styles/         # ðŸŽ¨ æ ·å¼æ¨¡å—
    â”‚   â”‚   â”œâ”€â”€ global.css  # å…¨å±€æ ·å¼é‡ç½®
    â”‚   â”‚   â”œâ”€â”€ layout.css  # å¸ƒå±€æ ·å¼
    â”‚   â”‚   â””â”€â”€ cards.css   # å¡ç‰‡ç»„ä»¶æ ·å¼
    â”‚   â”œâ”€â”€ types/          # ðŸ“ ç±»åž‹å®šä¹‰
    â”‚   â”‚   â””â”€â”€ weather.ts  # å¤©æ°”ç›¸å…³ç±»åž‹
    â”‚   â”œâ”€â”€ utils/          # ðŸ”§ å·¥å…·å‡½æ•°
    â”‚   â”‚   â”œâ”€â”€ common.ts   # é€šç”¨å·¥å…·å‡½æ•°
    â”‚   â”‚   â”œâ”€â”€ http.ts     # HTTPè¯·æ±‚å°è£…
    â”‚   â”‚   â””â”€â”€ weather/    # å¤©æ°”ç›¸å…³å·¥å…·
    â”‚   â”‚       â””â”€â”€ icons.ts # å¤©æ°”å›¾æ ‡æ˜ å°„
    â”‚   â”œâ”€â”€ constants/      # ðŸ“‹ å¸¸é‡ç®¡ç†
    â”‚   â”‚   â””â”€â”€ index.ts    # åº”ç”¨é…ç½®å¸¸é‡
    â”‚   â”œâ”€â”€ views/          # ðŸ“„ é¡µé¢ç»„ä»¶
    â”‚   â”‚   â””â”€â”€ Dashboard.vue # ä¸»é¡µé¢ï¼ˆæ–°æž¶æž„ï¼‰
    â”‚   â””â”€â”€ main.ts         # åº”ç”¨å…¥å£
    â”‚   â”œâ”€â”€ router/
    â”‚   â””â”€â”€ App.vue
    â”œâ”€â”€ vite.config.ts     # Vite é…ç½®ï¼ˆå«ä»£ç†ï¼‰
    â””â”€â”€ package.json       # Node ä¾èµ–

### ðŸŽ¯ æž¶æž„è®¾è®¡åŽŸåˆ™

#### 1. **ç»„ä»¶åŒ–è®¾è®¡**
- **å•ä¸€èŒè´£**: æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªç‰¹å®šåŠŸèƒ½
- **å¯å¤ç”¨æ€§**: ç»„ä»¶è®¾è®¡è€ƒè™‘åœ¨ä¸åŒåœºæ™¯ä¸‹çš„å¤ç”¨
- **æ¾è€¦åˆ**: ç»„ä»¶é—´é€šè¿‡propså’Œeventsé€šä¿¡ï¼Œé¿å…ç›´æŽ¥ä¾èµ–

#### 2. **æ ·å¼æ¨¡å—åŒ–**
- **å…¨å±€æ ·å¼**: `styles/global.css` - é‡ç½®æ ·å¼å’ŒåŸºç¡€è®¾å®š
- **å¸ƒå±€æ ·å¼**: `styles/layout.css` - ç½‘æ ¼å¸ƒå±€å’Œå“åº”å¼è®¾è®¡
- **ç»„ä»¶æ ·å¼**: æ¯ä¸ªç»„ä»¶ä½¿ç”¨scopedæ ·å¼ï¼Œé¿å…æ ·å¼æ±¡æŸ“
- **æ ·å¼å¤ç”¨**: é€šç”¨å¡ç‰‡ã€æŒ‰é’®ç­‰åŸºç¡€æ ·å¼æå–ä¸ºCSSæ¨¡å—

#### 3. **ä¸šåŠ¡é€»è¾‘åˆ†å±‚**
- **Composables**: ä½¿ç”¨Vue3ç»„åˆå¼APIå°è£…å¯å¤ç”¨çš„ä¸šåŠ¡é€»è¾‘
- **APIæœåŠ¡å±‚**: `composables/useWeatherApi.ts` ç»Ÿä¸€ç®¡ç†APIè°ƒç”¨
- **å·¥å…·å‡½æ•°**: `utils/` ç›®å½•å­˜æ”¾çº¯å‡½æ•°å·¥å…·
- **ç±»åž‹å®‰å…¨**: TypeScriptç±»åž‹å®šä¹‰ç¡®ä¿æ•°æ®ç»“æž„ä¸€è‡´æ€§

#### 4. **çŠ¶æ€ç®¡ç†**
- **Storeæ¨¡å¼**: ä½¿ç”¨Piniaç®¡ç†å…¨å±€çŠ¶æ€ï¼ˆå¦‚æ”¶è—åŸŽå¸‚ï¼‰
- **å±€éƒ¨çŠ¶æ€**: ç»„ä»¶å†…éƒ¨çŠ¶æ€ä½¿ç”¨ref/reactive
- **æ•°æ®æŒä¹…åŒ–**: localStorageé›†æˆåœ¨Storeä¸­ï¼Œç»Ÿä¸€ç®¡ç†

#### 5. **å¯ç»´æŠ¤æ€§åŽŸåˆ™**
- **æ–‡ä»¶èŒè´£æ˜Žç¡®**: æ¯ä¸ªæ–‡ä»¶åªè´Ÿè´£ç‰¹å®šåŠŸèƒ½
- **å‘½åè§„èŒƒ**: ç»„ä»¶ã€å‡½æ•°ã€å˜é‡ä½¿ç”¨è¯­ä¹‰åŒ–å‘½å
- **é…ç½®é›†ä¸­**: å¸¸é‡å’Œé…ç½®ç»Ÿä¸€ç®¡ç†åœ¨`constants/`
- **æ–‡æ¡£å®Œæ•´**: å…³é”®å‡½æ•°å’Œç»„ä»¶åŒ…å«TypeScriptç±»åž‹æ³¨é‡Š

```

### ðŸš€ ä½¿ç”¨æ–°æž¶æž„çš„å¥½å¤„

1. **å¼€å‘æ•ˆçŽ‡æå‡**: ç»„ä»¶åŒ–å¼€å‘ï¼ŒåŠŸèƒ½æ¨¡å—ç‹¬ç«‹ï¼Œå¹¶è¡Œå¼€å‘æ›´å®¹æ˜“
2. **ç»´æŠ¤æˆæœ¬é™ä½Ž**: å•ä¸ªç»„ä»¶ä¿®æ”¹ä¸å½±å“å…¶ä»–éƒ¨åˆ†ï¼Œé™ä½Žå›žå½’é£Žé™©
3. **ä»£ç å¤ç”¨æ€§**: ç»„ä»¶å¯åœ¨ä¸åŒé¡µé¢å¤ç”¨ï¼Œå‡å°‘é‡å¤ä»£ç 
4. **å›¢é˜Ÿåä½œ**: æ¸…æ™°çš„æ–‡ä»¶ç»“æž„å’ŒèŒè´£åˆ†å·¥ï¼Œä¾¿äºŽå¤šäººåä½œ
5. **æµ‹è¯•å‹å¥½**: æ¯ä¸ªç»„ä»¶å’Œå‡½æ•°éƒ½å¯ä»¥ç‹¬ç«‹æµ‹è¯•
6. **æ‰©å±•æ€§å¼º**: æ–°å¢žåŠŸèƒ½åªéœ€æ·»åŠ æ–°ç»„ä»¶ï¼Œä¸éœ€ä¿®æ”¹çŽ°æœ‰ä»£ç 

### ðŸ’¡ **æž¶æž„è¿ç§»è¯´æ˜Ž**

**é‡è¦æç¤ºï¼šé¡¹ç›®å·²å®Œæˆæž¶æž„é‡æž„ï¼** 

- âœ… **æ—§ç‰ˆæœ¬**: å•ä¸€ `Dashboard.vue` æ–‡ä»¶ï¼ˆå·²åˆ é™¤ï¼‰
- ðŸš€ **æ–°ç‰ˆæœ¬**: æ¨¡å—åŒ–ç»„ä»¶æž¶æž„ï¼ˆå½“å‰ä½¿ç”¨ï¼‰

å¦‚æžœæ‚¨æ˜¯åä½œè€…ï¼Œè¯·æ³¨æ„ï¼š
1. é¡¹ç›®çŽ°åœ¨ä½¿ç”¨æ¨¡å—åŒ–æž¶æž„ï¼Œä»£ç æ›´æ¸…æ™°æ˜“ç»´æŠ¤
2. æ‰€æœ‰åŠŸèƒ½å·²æ‹†åˆ†ä¸ºç‹¬ç«‹ç»„ä»¶ï¼Œåœ¨ `src/components/` ç›®å½•
3. ä¸šåŠ¡é€»è¾‘æå–ä¸º `composables`ï¼Œæ ·å¼æ¨¡å—åŒ–ç®¡ç†
4. å¦‚æœ‰ç–‘é—®ï¼Œè¯·å‚è€ƒä¸Šé¢çš„æž¶æž„è®¾è®¡åŽŸåˆ™

### ðŸ”§ **å¼€å‘å·¥ä½œæµ**

æ–°å¢žåŠŸèƒ½æ—¶è¯·éµå¾ªä»¥ä¸‹æ¨¡å¼ï¼š
```bash
# 1. æ–°å¢žç»„ä»¶
src/components/åŠŸèƒ½æ¨¡å—/ComponentName.vue

# 2. æ–°å¢žä¸šåŠ¡é€»è¾‘
src/composables/useFeatureName.ts

# 3. æ–°å¢žç±»åž‹å®šä¹‰
src/types/featureName.ts

# 4. æ–°å¢žæ ·å¼æ¨¡å—ï¼ˆå¯é€‰ï¼‰
src/styles/featureName.css
```

## å¿«é€Ÿå¼€å§‹

### 1. åŽç«¯é…ç½®
```bash
# 1. åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
py -m venv backend\.venv
backend\.venv\Scripts\activate  # Windows
source backend/.venv/bin/activate  # Linux/Mac

# 2. å®‰è£…ä¾èµ–
pip install -r backend/requirements.txt

# 3. é…ç½® backend/.env
QWEATHER_API_KEY=ä½ çš„å’Œé£Žå¤©æ°”å¯†é’¥
QWEATHER_GEO=https://geoapi.qweather.com
QWEATHER_BASE=https://devapi.qweather.com
ALLOW_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# 4. å¯åŠ¨åŽç«¯ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
python -m uvicorn app.main:app --app-dir backend --host 127.0.0.1 --port 8000 --reload
```

### 2. å‰ç«¯é…ç½®
```bash
# 1. å®‰è£…ä¾èµ–
cd frontend
npm install

# 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev -- --host 0.0.0.0 --port 5173
```

### 3. éªŒè¯
1. æ‰“å¼€ `http://127.0.0.1:8000/api/health` æ£€æŸ¥åŽç«¯
2. è®¿é—® `http://localhost:5173` ä½¿ç”¨åº”ç”¨
3. åœ¨æœç´¢æ¡†è¾“å…¥"åŒ—äº¬"ï¼Œé€‰æ‹©ä¸‹æ‹‰é¡¹å³å¯çœ‹åˆ°å¤©æ°”ä¿¡æ¯

## API æŽ¥å£

### åŽç«¯ä»£ç†æŽ¥å£
- `GET /api/health` - å¥åº·æ£€æŸ¥
- `GET /api/geo?query=åŸŽå¸‚å` - åŸŽå¸‚æœç´¢
- `GET /api/weather/now?location=åŸŽå¸‚ID` - å®žæ—¶å¤©æ°”
- `GET /api/weather/24h?location=åŸŽå¸‚ID` - 24å°æ—¶é¢„æŠ¥
- `GET /api/weather/7d?location=åŸŽå¸‚ID` - 7å¤©é¢„æŠ¥

### æ•°æ®ç¼“å­˜
- ä½¿ç”¨ TTLCache å¯¹å’Œé£Žå¤©æ°” API å“åº”åš 60 ç§’ç¼“å­˜
- ç¼“å­˜é”®ï¼šè¯·æ±‚URL + å‚æ•°çš„ç¨³å®šå­—ç¬¦ä¸²
- è‡ªåŠ¨æ¸…ç†è¿‡æœŸç¼“å­˜

## å†…ç½‘ç©¿é€ï¼ˆå¯é€‰ï¼‰
```bash
# ä»…æš´éœ²å‰ç«¯ 5173 ç«¯å£ï¼ˆå·²é…ç½®ä»£ç†ï¼‰
ngrok http http://localhost:5173

# å¤åˆ¶ç”Ÿæˆçš„åŸŸååˆ†äº«å³å¯
# å½¢å¦‚ https://xxxx.ngrok-free.app
```

## å¼€å‘å»ºè®®
1. **çŽ¯å¢ƒå˜é‡**
   - ä¸¥æ ¼éµå®ˆ `.gitignore`ï¼Œä¸è¦æäº¤ `.env` æ–‡ä»¶
   - å‚è€ƒ `.env.example` é…ç½®æœ¬åœ°çŽ¯å¢ƒ

2. **API è°ƒç”¨**
   - ä½¿ç”¨å’Œé£Žå¤©æ°”å…è´¹ç‰ˆ APIï¼ˆdevapi/geoapiï¼‰
   - è‹¥ç”¨ä¸“å±žåŸŸåï¼ˆ*.re.qweatherapi.comï¼‰ï¼Œéœ€æ”¹ç”¨ Bearer é‰´æƒ

3. **ç¼“å­˜ç­–ç•¥**
   - é»˜è®¤ 60 ç§’ TTL é€‚åˆå¤§å¤šæ•°åœºæ™¯
   - å¯åœ¨ `qweather.py` ä¸­è°ƒæ•´ç¼“å­˜å‚æ•°

4. **å‰ç«¯ä¼˜åŒ–**
   - æœç´¢é˜²æŠ–ï¼ˆå·²å®žçŽ°ï¼‰
   - é”™è¯¯å‹å¥½æç¤º
   - å“åº”å¼è®¾è®¡
   - æ¨¡å—åŒ–CSSæž¶æž„

## å‰ç«¯è®¾è®¡è§„åˆ™

### CSSæž¶æž„åŽŸåˆ™
1. **æ¨¡å—åŒ–è®¾è®¡**
   - æ¯ä¸ªç»„ä»¶æ‹¥æœ‰ç‹¬ç«‹çš„CSSæ ·å¼
   - é¿å…ä½¿ç”¨ `!important` å¼ºåˆ¶è¦†ç›–
   - æ˜Žç¡®çš„å‘½åè§„èŒƒï¼š`/* ç»„ä»¶åç§°æ ·å¼ - ç‹¬ç«‹æ¨¡å— */`

2. **æ ·å¼éš”ç¦»**
   ```css
   /* âœ… æŽ¨èï¼šç»„ä»¶ç‹¬ç«‹æ ·å¼ */
   .search-input {
     margin: 0;
     padding: clamp(1rem, 2.5vw, 1.5rem) clamp(1.5rem, 3vw, 2rem);
   }
   
   /* âŒ é¿å…ï¼šå…¨å±€å¼ºåˆ¶é‡ç½® */
   * {
     padding: 0 !important;
   }
   ```

3. **å“åº”å¼è®¾è®¡**
   - ä½¿ç”¨ `clamp()` å‡½æ•°å®žçŽ°æµä½“æŽ’ç‰ˆ
   - ç§»åŠ¨ä¼˜å…ˆçš„å“åº”å¼æ–­ç‚¹
   - Grid + Flexbox æ··åˆå¸ƒå±€

### å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

#### 1. TypeScript æ‰¾ä¸åˆ°å·²åˆ é™¤æ–‡ä»¶é”™è¯¯
**é—®é¢˜ç—‡çŠ¶**ï¼š
```
æ‰¾ä¸åˆ°æ–‡ä»¶"d:/WeatherWhisper/frontend/src/components/HelloWorld.vue"ã€‚
ç¨‹åºåŒ…å«è¯¥æ–‡ä»¶æ˜¯å› ä¸º:
  é€šè¿‡åœ¨ "d:/WeatherWhisper/frontend/tsconfig.app.json" ä¸­çš„åŒ…å«æ¨¡å¼ "src/**/*.vue" åŒ¹é…
```

**é—®é¢˜åŽŸå› **ï¼šTypeScript ç¼–è¯‘å™¨ç¼“å­˜ä¸­ä¿ç•™äº†å¯¹å·²åˆ é™¤æ–‡ä»¶çš„å¼•ç”¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ–¹æ³•1ï¼šæ¸…ç† TypeScript æž„å»ºç¼“å­˜
cd frontend
Remove-Item -Path "node_modules/.tmp" -Recurse -Force -ErrorAction SilentlyContinue

# æ–¹æ³•2ï¼šå¦‚æžœé—®é¢˜ä»å­˜åœ¨ï¼Œé‡å¯ TypeScript è¯­è¨€æœåŠ¡
# åœ¨ VS Code/Cursor ä¸­ï¼š
# 1. æŒ‰ Ctrl+Shift+P æ‰“å¼€å‘½ä»¤é¢æ¿
# 2. è¾“å…¥ "TypeScript: Restart TS Server"
# 3. é€‰æ‹©å¹¶æ‰§è¡Œ

# æ–¹æ³•3ï¼šé‡æ–°æž„å»ºé¡¹ç›®
npm run build
```

**é¢„é˜²æŽªæ–½**ï¼š
- åˆ é™¤ç»„ä»¶æ–‡ä»¶åŽåŠæ—¶é‡å¯ç¼–è¾‘å™¨çš„ TypeScript æœåŠ¡
- å®šæœŸæ¸…ç†æž„å»ºç¼“å­˜ï¼Œç‰¹åˆ«æ˜¯é‡æž„åŽ
- ä½¿ç”¨ `npm run build` éªŒè¯æ²¡æœ‰ TypeScript é”™è¯¯

#### 2. èƒŒæ™¯æ— æ³•å…¨å±é—®é¢˜
**é—®é¢˜**ï¼šé¡µé¢èƒŒæ™¯å‡ºçŽ°ç™½è¾¹ï¼Œæ— æ³•è¦†ç›–æ•´ä¸ªå±å¹•
```css
/* âŒ é—®é¢˜ä»£ç  */
.app {
  padding: 2rem; /* å¯¼è‡´èƒŒæ™¯ç¼©å° */
  background-size: 100% 100%; /* å›ºå®šå°ºå¯¸ï¼Œæ»šåŠ¨æ—¶ä¸¢å¤± */
}
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```css
/* âœ… è§£å†³æ–¹æ¡ˆ */
html, body {
  margin: 0;
  padding: 0;
}

body {
  background: linear-gradient(135deg, #74b9ff 0%, #0984e3 50%, #6c5ce7 100%);
  background-attachment: fixed; /* å…³é”®ï¼šå›ºå®šèƒŒæ™¯ */
  background-size: cover; /* è¦†ç›–æ•´ä¸ªè§†å£ */
  min-height: 100vh;
}

.container {
  margin: 0 auto;
  padding: clamp(0.5rem, 1vw, 1.5rem); /* å®¹å™¨å†…è¾¹è· */
}
```

#### 2. å†…å®¹æº¢å‡ºå’Œå¸ƒå±€æ··ä¹±
**é—®é¢˜**ï¼šå¡ç‰‡å†…å®¹æº¢å‡ºå®¹å™¨ï¼Œæ¨ªå‘æ»šåŠ¨å¤±æ•ˆ
```css
/* âŒ é—®é¢˜ä»£ç  */
.hour-cards {
  display: flex;
  flex-wrap: wrap; /* å¯¼è‡´æ¢è¡Œè€Œéžæ»šåŠ¨ */
}
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```css
/* âœ… è§£å†³æ–¹æ¡ˆ */
.hourly-forecast-module {
  display: grid;
  grid-template-columns: repeat(6, 1fr); /* æ¡Œé¢ç«¯ï¼š6åˆ—ç½‘æ ¼ */
  gap: clamp(1rem, 2vw, 1.5rem);
  justify-items: center;
}

@media (max-width: 767px) {
  .hourly-forecast-module {
    grid-template-columns: repeat(4, 1fr); /* ç§»åŠ¨ç«¯ï¼š4åˆ—ç½‘æ ¼ */
  }
}
```

#### 3. æ–‡å­—è´´è¾¹é—®é¢˜
**é—®é¢˜**ï¼šç»„ä»¶å†…æ–‡å­—ç´§è´´è¾¹æ¡†ï¼Œè§†è§‰æ•ˆæžœå·®
```css
/* âŒ é—®é¢˜ä»£ç  */
.card {
  padding: 0; /* æ— å†…è¾¹è· */
}
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```css
/* âœ… è§£å†³æ–¹æ¡ˆï¼šåˆ†ç»„ä»¶ç‹¬ç«‹è®¾ç½® */
.search-input {
  padding: clamp(1rem, 2.5vw, 1.5rem) clamp(1.5rem, 3vw, 2rem);
}

.favorite-card {
  padding: 1rem 1.25rem;
}

.hour-card {
  padding: 1.25rem 1rem;
}
```

#### 4. ä¸‹æ‹‰æ¡†é®æŒ¡é—®é¢˜
**é—®é¢˜**ï¼šæœç´¢ä¸‹æ‹‰æ¡†ä¸Žæ”¶è—åˆ—è¡¨é‡å 
**è§£å†³æ–¹æ¡ˆ**ï¼š
```css
/* ä¸‹æ‹‰æ¡†ä½¿ç”¨ç»å¯¹å®šä½ */
.options-dropdown {
  position: absolute;
  top: calc(100% + 8px);
  z-index: 2000;
}

/* æ”¶è—æ¡†åŠ¨æ€æŽ¨ç§» */
.favorites-section.pushed-down {
  margin-top: 280px;
  transition: margin-top 0.3s ease;
}
```

### å¼€å‘æœ€ä½³å®žè·µ
1. **CSSä¼˜å…ˆçº§ç®¡ç†**
   - é¿å…æ·±å±‚åµŒå¥—é€‰æ‹©å™¨
   - ä½¿ç”¨ç±»é€‰æ‹©å™¨è€Œéžæ ‡ç­¾é€‰æ‹©å™¨
   - åªåœ¨å¿…è¦æ—¶ä½¿ç”¨ `!important`

2. **å¸ƒå±€è°ƒè¯•æŠ€å·§**
   - ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·å®žæ—¶è°ƒè¯•
   - é€šè¿‡ `outline: 1px solid red` å¿«é€Ÿå®šä½é—®é¢˜
   - æ£€æŸ¥ `box-sizing: border-box` è®¾ç½®

3. **å“åº”å¼æµ‹è¯•**
   - æµ‹è¯•å¤šç§å±å¹•å°ºå¯¸
   - éªŒè¯ `clamp()` å‡½æ•°çš„æœ€å°/æœ€å¤§å€¼
   - ç¡®ä¿è§¦æ‘¸è®¾å¤‡çš„äº¤äº’å‹å¥½æ€§

## Git æäº¤ä¸ŽæŽ¨é€æµç¨‹

### æ­£ç¡®çš„æäº¤æ­¥éª¤

#### 1. æ£€æŸ¥æ–‡ä»¶çŠ¶æ€
```bash
git status
```
æŸ¥çœ‹å½“å‰å·¥ä½œç›®å½•çš„ä¿®æ”¹çŠ¶æ€ï¼Œäº†è§£å“ªäº›æ–‡ä»¶å·²ä¿®æ”¹ã€æ–°å¢žæˆ–åˆ é™¤ã€‚

#### 2. ç†è§£ .gitignore è§„åˆ™
åœ¨æäº¤å‰ï¼ŒåŠ¡å¿…äº†è§£ `.gitignore` æ–‡ä»¶æŽ’é™¤çš„å†…å®¹ï¼š

**é¡¹ç›®æ ¹ç›®å½• .gitignore æŽ’é™¤ï¼š**
- `backend/.venv/` - Python è™šæ‹ŸçŽ¯å¢ƒ
- `__pycache__/`, `*.pyc` - Python ç¼–è¯‘æ–‡ä»¶
- `frontend/node_modules/` - Node.js ä¾èµ–åŒ…
- `backend/.env`, `.env` - çŽ¯å¢ƒå˜é‡æ–‡ä»¶ï¼ˆåŒ…å«æ•æ„Ÿä¿¡æ¯ï¼‰
- `frontend/dist/` - æž„å»ºè¾“å‡ºç›®å½•
- `.idea/`, `.vscode/` - IDE é…ç½®æ–‡ä»¶
- å„ç§æ—¥å¿—æ–‡ä»¶å’Œç³»ç»Ÿæ–‡ä»¶

**frontend/.gitignore è¡¥å……æŽ’é™¤ï¼š**
- `logs`, `*.log` - æ—¥å¿—æ–‡ä»¶
- `node_modules`, `dist` - ä¾èµ–å’Œæž„å»ºæ–‡ä»¶
- ç¼–è¾‘å™¨ä¸´æ—¶æ–‡ä»¶


#### 4. ç¡®è®¤æš‚å­˜åŒºå†…å®¹
```bash
git status
```
æ£€æŸ¥ "Changes to be committed" éƒ¨åˆ†ï¼Œç¡®ä¿åªåŒ…å«åº”è¯¥æäº¤çš„æ–‡ä»¶ã€‚

#### 5. åˆ›å»ºæäº¤
```bash
git commit -m "feat: æ›´æ–°å¤©æ°”åº”ç”¨åŠŸèƒ½å’Œå‰ç«¯ç»„ä»¶"
```
ä½¿ç”¨ç®€æ´æ˜Žç¡®çš„æäº¤ä¿¡æ¯ï¼Œéµå¾ªçº¦å®šå¼æäº¤æ ¼å¼ã€‚

#### 6. æŽ¨é€åˆ°è¿œç¨‹ä»“åº“
```bash
# æ£€æŸ¥è¿œç¨‹ä»“åº“é…ç½®
git remote -v

# æŽ¨é€åˆ° GitHub
git push origin main
```

#### 7. éªŒè¯æŽ¨é€ç»“æžœ
```bash
git status
# åº”æ˜¾ç¤ºï¼šYour branch is up to date with 'origin/main'
```

### æäº¤ä¿¡æ¯è§„èŒƒ

é‡‡ç”¨çº¦å®šå¼æäº¤æ ¼å¼ï¼š
- `feat:` - æ–°åŠŸèƒ½
- `fix:` - ä¿®å¤bug
- `docs:` - æ–‡æ¡£æ›´æ–°
- `style:` - ä»£ç æ ¼å¼è°ƒæ•´
- `refactor:` - é‡æž„ä»£ç 
- `test:` - æµ‹è¯•ç›¸å…³
- `chore:` - æž„å»ºæˆ–è¾…åŠ©å·¥å…·å˜åŠ¨

### å¸¸è§é”™è¯¯é¿å…

1. **ä¸è¦æäº¤æ•æ„Ÿä¿¡æ¯**
   - çŽ¯å¢ƒå˜é‡æ–‡ä»¶ï¼ˆ`.env`ï¼‰
   - API å¯†é’¥å’Œé…ç½®

2. **ä¸è¦æäº¤ç”Ÿæˆæ–‡ä»¶**
   - `node_modules/` - ä¾èµ–åŒ…ç›®å½•
   - `dist/` - æž„å»ºè¾“å‡º
   - `__pycache__/` - Python ç¼“å­˜

3. **ä¸è¦æäº¤IDEé…ç½®**
   - `.idea/`, `.vscode/` - ç¼–è¾‘å™¨é…ç½®
   - ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜

### æœ€ä½³å®žè·µ

1. **å®šæœŸæäº¤**ï¼šå®Œæˆä¸€ä¸ªåŠŸèƒ½æ¨¡å—å°±æäº¤ä¸€æ¬¡
2. **åŽŸå­æäº¤**ï¼šæ¯æ¬¡æäº¤åªåŒ…å«ç›¸å…³çš„æ›´æ”¹
3. **æ¸…æ™°æè¿°**ï¼šæäº¤ä¿¡æ¯è¦èƒ½æ¸…æ¥šè¯´æ˜Žæœ¬æ¬¡æ›´æ”¹çš„å†…å®¹
4. **å…ˆæ‹‰åŽæŽ¨**ï¼šå¤šäººåä½œæ—¶å…ˆ `git pull` å† `git push`

## è®¸å¯è¯´æ˜Ž
- æœ¬é¡¹ç›®ä»…ç”¨äºŽå­¦ä¹ äº¤æµ
- è¯·éµå®ˆå’Œé£Žå¤©æ°”å¼€å‘è€…åè®®
- å›¾æ ‡ç‰ˆæƒå½’å’Œé£Žå¤©æ°”æ‰€æœ‰

---

## ðŸš¨ é—®é¢˜è§£å†³è®°å½•2025.8.11

æœ¬æ–‡æ¡£è®°å½•äº†é¡¹ç›®å¯åŠ¨è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸»è¦é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼Œä¾›åŽç»­å¼€å‘è€…å‚è€ƒã€‚

### é—®é¢˜1ï¼špipä¾èµ–å†²çª

**é—®é¢˜æè¿°ï¼š**
```
ERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.
mcp 1.9.1 requires anyio>=4.5, but you have anyio 3.7.1 which is incompatible.
mcp 1.9.1 requires pydantic<3.0.0,>=2.7.2, but you have pydantic 2.5.0 which is incompatible.
```

**é—®é¢˜åŽŸå› ï¼š**
- ç³»ç»ŸPythonçŽ¯å¢ƒä¸­æœ‰å¤šä¸ªåŒ…ç‰ˆæœ¬å†²çª
- è™šæ‹ŸçŽ¯å¢ƒåˆ›å»ºæ—¶ç»§æ‰¿äº†ç³»ç»ŸåŒ…çš„ç‰ˆæœ¬

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# å‡çº§å†²çªçš„åŒ…åˆ°å…¼å®¹ç‰ˆæœ¬
pip install "anyio>=4.5"
pip install "pydantic>=2.7.2"
pip install "starlette>=0.41.3"
pip install "h11>=0.16.0"
```

**é¢„é˜²æŽªæ–½ï¼š**
- ä½¿ç”¨è™šæ‹ŸçŽ¯å¢ƒéš”ç¦»é¡¹ç›®ä¾èµ–
- å®šæœŸæ›´æ–°requirements.txtæ–‡ä»¶
- é¿å…åœ¨ç³»ç»ŸPythonä¸­å®‰è£…è¿‡å¤šåŒ…

### é—®é¢˜2ï¼šPythonè·¯å¾„é…ç½®é”™è¯¯

**é—®é¢˜æè¿°ï¼š**
```
No Python at '"D:\python312\python.exe'
```

**é—®é¢˜åŽŸå› ï¼š**
- è™šæ‹ŸçŽ¯å¢ƒé…ç½®æŒ‡å‘äº†ä¸å­˜åœ¨çš„Pythonè·¯å¾„
- ç³»ç»Ÿä¸­æœ‰å¤šä¸ªPythonç‰ˆæœ¬ï¼Œè™šæ‹ŸçŽ¯å¢ƒæŒ‡å‘é”™è¯¯ç‰ˆæœ¬

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# åˆ é™¤æŸåçš„è™šæ‹ŸçŽ¯å¢ƒ
deactivate
Remove-Item -Path "backend\.venv" -Recurse -Force

# é‡æ–°åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
py -m venv backend\.venv
backend\.venv\Scripts\activate

# é‡æ–°å®‰è£…ä¾èµ–
pip install -r backend/requirements.txt
```

### é—®é¢˜3ï¼šrequirements.txtç¼–ç é—®é¢˜

**é—®é¢˜æè¿°ï¼š**
```
UnicodeDecodeError: 'gbk' codec can't decode byte 0xae in position 27: illegal multibyte sequence
```

**é—®é¢˜åŽŸå› ï¼š**
- Windowsç³»ç»Ÿé»˜è®¤ä½¿ç”¨GBKç¼–ç è¯»å–æ–‡ä»¶
- requirements.txtæ–‡ä»¶åŒ…å«ä¸­æ–‡å­—ç¬¦
- pipæ— æ³•æ­£ç¡®è§£æžæ–‡ä»¶å†…å®¹

**è§£å†³æ–¹æ¡ˆï¼š**
- å°†requirements.txtä¸­çš„ä¸­æ–‡æ³¨é‡Šæ”¹ä¸ºè‹±æ–‡
- ä½¿ç”¨UTF-8ç¼–ç ä¿å­˜æ–‡ä»¶
- é¿å…åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦

**ä¿®å¤åŽçš„requirements.txtï¼š**
```txt
# Core framework - compatible versions
fastapi>=0.104.0,<0.112.0
uvicorn[standard]>=0.24.0,<0.31.0
httpx>=0.25.0,<0.28.0
# ... å…¶ä»–ä¾èµ–
```

### é—®é¢˜4ï¼šJWTæ¨¡å—å¯¼å…¥é”™è¯¯

**é—®é¢˜æè¿°ï¼š**
```
ModuleNotFoundError: No module named 'jwt'
```

**é—®é¢˜åŽŸå› ï¼š**
- ä»£ç ä¸­ä½¿ç”¨äº† `import jwt`
- ä½†åº”è¯¥ä½¿ç”¨ `python-jose` åŒ…æä¾›çš„JWTåŠŸèƒ½

**è§£å†³æ–¹æ¡ˆï¼š**
```python
# ä¿®å¤å‰
import jwt

# ä¿®å¤åŽ
from jose import jwt, JWTError

# åŒæ—¶ä¿®å¤å¼‚å¸¸å¤„ç†
# ä¿®å¤å‰
except jwt.PyJWTError:
# ä¿®å¤åŽ
except JWTError:
```

**éœ€è¦ä¿®å¤çš„æ–‡ä»¶ï¼š**
- `backend/app/routers/auth.py`
- `backend/app/services/user_service.py`

### é—®é¢˜5ï¼špydantic-settingsæ¨¡å—ç¼ºå¤±

**é—®é¢˜æè¿°ï¼š**
```
ModuleNotFoundError: No module named 'pydantic_settings'
```

**é—®é¢˜åŽŸå› ï¼š**
- ç¼ºå°‘ `pydantic-settings` åŒ…
- æˆ–è€…ç‰ˆæœ¬ä¸å…¼å®¹

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# å®‰è£…pydantic-settings
pip install pydantic-settings

# æˆ–è€…ä½¿ç”¨å…¼å®¹çš„å¯¼å…¥æ–¹å¼
from pydantic import BaseSettings  # å¯¹äºŽpydantic v2
```

### é—®é¢˜6ï¼šæ•°æ®åº“è¿žæŽ¥é…ç½®é—®é¢˜

**é—®é¢˜æè¿°ï¼š**
```
ERROR:app.database.connection:Database initialization error: (asyncmy.errors.OperationalError) (1045, "Access denied for user 'root'@'localhost' (using password: YES)")
```

**é—®é¢˜åŽŸå› ï¼š**
- MySQLç”¨æˆ·å¯†ç é…ç½®é”™è¯¯
- è®¤è¯æ’ä»¶ä¸å…¼å®¹ï¼ˆcaching_sha2_password vs mysql_native_passwordï¼‰

**è§£å†³æ–¹æ¡ˆï¼š**
```sql
-- åˆ›å»ºæ–°ç”¨æˆ·ï¼Œä½¿ç”¨å…¼å®¹çš„è®¤è¯æ–¹å¼
CREATE USER 'weatheruser'@'localhost' IDENTIFIED BY 'weatherpass123';
GRANT ALL PRIVILEGES ON weatherwhisper.* TO 'weatheruser'@'localhost';
GRANT ALL PRIVILEGES ON weatherwhisper.* TO 'weatheruser'@'127.0.0.1';
FLUSH PRIVILEGES;
```

**æ›´æ–°.envæ–‡ä»¶ï¼š**
```bash
DATABASE_URL=mysql+asyncmy://weatheruser:weatherpass123@localhost:3306/weatherwhisper
```

### é—®é¢˜7ï¼šç¼ºå¤±çš„æ•°æ®åº“æ¨¡åž‹æ–‡ä»¶

**é—®é¢˜æè¿°ï¼š**
```
ModuleNotFoundError: No module named 'app.schemas.user'
```

**é—®é¢˜åŽŸå› ï¼š**
- é¡¹ç›®æž¶æž„éœ€è¦ç‰¹å®šçš„æ•°æ®æ¨¡åž‹æ–‡ä»¶
- è¿™äº›æ–‡ä»¶åœ¨é¡¹ç›®è¿ç§»è¿‡ç¨‹ä¸­ä¸¢å¤±

**è§£å†³æ–¹æ¡ˆï¼š**
åˆ›å»ºç¼ºå¤±çš„æ¨¡å—æ–‡ä»¶ï¼š
- `backend/app/schemas/user.py` - ç”¨æˆ·æ•°æ®æ¨¡åž‹
- `backend/app/schemas/city.py` - åŸŽå¸‚æ•°æ®æ¨¡åž‹  
- `backend/app/schemas/weather.py` - å¤©æ°”æ•°æ®æ¨¡åž‹

### é—®é¢˜8ï¼šçŽ¯å¢ƒå˜é‡é…ç½®ä¼˜å…ˆçº§

**é—®é¢˜æè¿°ï¼š**
- ä¿®æ”¹äº† `config.py` ä¸­çš„é»˜è®¤å€¼
- ä½† `.env` æ–‡ä»¶ä¸­çš„é…ç½®ä»ç„¶è¦†ç›–äº†é»˜è®¤å€¼

**é—®é¢˜åŽŸå› ï¼š**
- `.env` æ–‡ä»¶çš„é…ç½®ä¼˜å…ˆçº§é«˜äºŽä»£ç ä¸­çš„é»˜è®¤å€¼
- éœ€è¦åŒæ—¶æ›´æ–°ä¸¤ä¸ªåœ°æ–¹çš„é…ç½®

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ›´æ–° `.env` æ–‡ä»¶ä¸­çš„é…ç½®
2. ç¡®ä¿ `config.py` ä¸­çš„é»˜è®¤å€¼ä¹Ÿæ˜¯æ­£ç¡®çš„
3. ä½¿ç”¨çŽ¯å¢ƒå˜é‡è¦†ç›–é»˜è®¤å€¼

## ðŸŽ¯ æˆåŠŸå¯åŠ¨æ£€æŸ¥æ¸…å•

### åŽç«¯å¯åŠ¨æ£€æŸ¥
- [x] è™šæ‹ŸçŽ¯å¢ƒæ¿€æ´»
- [x] ä¾èµ–åŒ…å®‰è£…å®Œæˆ
- [x] æ•°æ®åº“è¿žæŽ¥æˆåŠŸ
- [x] æ•°æ®åº“è¡¨åˆ›å»ºæˆåŠŸ
- [x] FastAPIæœåŠ¡å¯åŠ¨æˆåŠŸ
- [x] ç«¯å£8000ç›‘å¬æ­£å¸¸

### å‰ç«¯å¯åŠ¨æ£€æŸ¥
- [x] Node.jsçŽ¯å¢ƒæ­£å¸¸
- [x] ä¾èµ–åŒ…å®‰è£…å®Œæˆ
- [x] å¼€å‘æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
- [x] ç«¯å£5173ç›‘å¬æ­£å¸¸
- [x] ä»£ç†é…ç½®æ­£ç¡®

### æ•°æ®åº“é…ç½®æ£€æŸ¥
- [x] MySQLæœåŠ¡è¿è¡Œæ­£å¸¸
- [x] æ•°æ®åº“ç”¨æˆ·æƒé™æ­£ç¡®
- [x] æ•°æ®åº“è¡¨ç»“æž„å®Œæ•´
- [x] è¿žæŽ¥å­—ç¬¦ä¸²æ ¼å¼æ­£ç¡®

## ðŸ’¡ ç»éªŒæ€»ç»“

1. **çŽ¯å¢ƒéš”ç¦»å¾ˆé‡è¦**ï¼šä½¿ç”¨è™šæ‹ŸçŽ¯å¢ƒé¿å…ç³»ç»ŸåŒ…å†²çª
2. **é…ç½®æ–‡ä»¶è¦åŒæ­¥**ï¼šä»£ç é»˜è®¤å€¼å’ŒçŽ¯å¢ƒå˜é‡è¦ä¿æŒä¸€è‡´
3. **ä¾èµ–ç‰ˆæœ¬è¦å…¼å®¹**ï¼šæ³¨æ„åŒ…ä¹‹é—´çš„ç‰ˆæœ¬å…¼å®¹æ€§
4. **é”™è¯¯ä¿¡æ¯è¦ä»”ç»†çœ‹**ï¼šå¾ˆå¤šé—®é¢˜éƒ½æœ‰æ˜Žç¡®çš„é”™è¯¯æç¤º
5. **åˆ†æ­¥éª¤è§£å†³é—®é¢˜**ï¼šä¸€æ¬¡è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œé¿å…åŒæ—¶ä¿®æ”¹å¤šä¸ªåœ°æ–¹

## ðŸ”§ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

```bash
# è™šæ‹ŸçŽ¯å¢ƒç®¡ç†
backend\.venv\Scripts\activate          # æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
deactivate                              # é€€å‡ºè™šæ‹ŸçŽ¯å¢ƒ

# ä¾èµ–ç®¡ç†
pip install -r backend/requirements.txt # å®‰è£…ä¾èµ–
pip list | findstr package_name         # æŸ¥çœ‹åŒ…ç‰ˆæœ¬

# æœåŠ¡å¯åŠ¨
python -m uvicorn app.main:app --app-dir backend --host 127.0.0.1 --port 8000 --reload  # å¯åŠ¨åŽç«¯
cd frontend
npm run dev                                    # å¯åŠ¨å‰ç«¯

# æ•°æ®åº“ç®¡ç†
python backend/init_database.py         # åˆå§‹åŒ–æ•°æ®åº“
mysql -u weatheruser -p                 # è¿žæŽ¥æ•°æ®åº“

# ç¼“å­˜æ¸…ç†
Remove-Item -Path "__pycache__" -Recurse -Force  # æ¸…ç†Pythonç¼“å­˜
```
